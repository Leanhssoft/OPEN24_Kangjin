@using banhang24.Hellper;
<div class="col-md-12 content-report">
    <div class="table-reponsive table-frame">
        <table class="table table-striped table-hover">
            <thead>
                <tr class="text-center">
                    <th class="@commonEnum.TypeReportCustomer.Customer_nhomkhach">Nhóm khách hàng</th>
                    <th class="@commonEnum.TypeReportCustomer.Customer_makhac">Mã khách</th>
                    <th class="@commonEnum.TypeReportCustomer.Customer_tenkhach">Tên khách hàng</th>
                    <th class="@commonEnum.TypeReportCustomer.Customer_dienthoai">Điện thoại</th>
                    <th class="@commonEnum.TypeReportCustomer.Customer_diachi">Địa chỉ</th>
                    <th class="@commonEnum.TypeReportCustomer.Customer_solanden">Số lần đến</th>
                    <th class="@commonEnum.TypeReportCustomer.Customer_gtmua">Tổng mua</th>
                    <th class="@commonEnum.TypeReportCustomer.Customer_gttra">Tổng trả</th>
                    <th class="@commonEnum.TypeReportCustomer.Customer_doanhthu">Doanh thu</th>
                    <th class="@commonEnum.TypeReportCustomer.Customer_ngaygiaodichgannhat">Ngày giao dịch gần nhất</th>
                    <th class="text-center">Chi tiết</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: BaoCaoKhachHang_TanSuat, visible: $root.Role_BaoCaoBanHang_TheoKhachHang()">
                <tr>
                    <td class="@commonEnum.TypeReportCustomer.Customer_nhomkhach text-left" data-bind="text: Remove_LastComma(TenNhomDoiTuongs)"></td>
                    <td class="@commonEnum.TypeReportCustomer.Customer_makhac text-center">
                        <a href="javascript:void(0)" style="cursor: pointer" data-bind="text: MaKhachHang, click: $parent.LoadKhachHang_byMaKH">
                        </a>
                    </td>
                    <td class="@commonEnum.TypeReportCustomer.Customer_tenkhach text-left" data-bind="text: TenKhachHang"></td>
                    <td class="@commonEnum.TypeReportCustomer.Customer_dienthoai text-left" data-bind="text: DienThoai"></td>
                    <td class="@commonEnum.TypeReportCustomer.Customer_diachi text-left" data-bind="text: DiaChi"></td>
                    <td class="@commonEnum.TypeReportCustomer.Customer_solanden text-right" data-bind="text: formatNumber3Digit(SoLanDen)"></td>
                    <td class="@commonEnum.TypeReportCustomer.Customer_gtmua text-right" data-bind="text: formatNumber3Digit(GiaTriMua)"></td>
                    <td class="@commonEnum.TypeReportCustomer.Customer_gttra text-right" data-bind="text: formatNumber3Digit(GiaTriTra)"></td>
                    <td class="@commonEnum.TypeReportCustomer.Customer_doanhthu text-right" data-bind="text: formatNumber3Digit(DoanhThu)"></td>
                    <td class="@commonEnum.TypeReportCustomer.Customer_ngaygiaodichgannhat text-center"
                        data-bind="text: NgayGiaoDichGanNhat? moment(NgayGiaoDichGanNhat).format('DD/MM/YYYY HH:mm'):''"></td>
                    <td class="text-center bold">
                        <a href="javascript:void(0)" data-bind="click: $root.BCTanSuat_ShowChiTiet">...</a>
                    </td>
                </tr>
            </tbody>
            <tfoot data-bind="visible: !$root.Role_BaoCaoBanHang_TheoKhachHang()">
                <tr >
                    <td class="text-center"  style="background: #F2EED6" colspan="11"><i>Bạn không có quyền xem báo cáo này!</i></td>
                </tr>
            </tfoot>
            <tfoot class="Report_Empty" 
                   data-bind="visible: $root.BaoCaoKhachHang_TanSuat().length === 0 && $root.Role_BaoCaoBanHang_TheoKhachHang()">
                <tr>
                    <td class="bg12 text-center" colspan="11"><i>Báo cáo không có dữ liệu</i></td>
                </tr>
            </tfoot>
            <tfoot data-bind="visible: $root.BaoCaoKhachHang_TanSuat().length > 0 && $root.Role_BaoCaoBanHang_TheoKhachHang()">
                <tr class="bg12 bold">
                    <td class="@commonEnum.TypeReportCustomer.Customer_nhomkhach text-left">Tổng cộng</td>
                    <td class="@commonEnum.TypeReportCustomer.Customer_makhac"></td>
                    <td class="@commonEnum.TypeReportCustomer.Customer_tenkhach"></td>
                    <td class="@commonEnum.TypeReportCustomer.Customer_dienthoai"></td>
                    <td class="@commonEnum.TypeReportCustomer.Customer_diachi text-right"></td>
                    <td class="@commonEnum.TypeReportCustomer.Customer_solanden text-right" data-bind="text: formatNumber3Digit(TNH_SoLuong())"></td>
                    <td class="@commonEnum.TypeReportCustomer.Customer_gtmua text-right" data-bind="text: formatNumber3Digit(KH_ThanhTien())"></td>
                    <td class="@commonEnum.TypeReportCustomer.Customer_gttra text-right" data-bind="text: formatNumber3Digit(NV_GiaTriTra())"></td>
                    <td class="@commonEnum.TypeReportCustomer.Customer_doanhthu text-right" data-bind="text: formatNumber3Digit(TH_DoanhThuThuan())"></td>
                    <td colspan="2"></td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>
