
@{
    ViewBag.Title = "Hỗ trợ tính năng phần mềm open24";
}
@section scripts{

}
<style>

    .format-circle {
        width: 100%;
        float: left;
    }

        .format-circle ul li {
            position: relative;
            padding-left: 20px;
            margin-bottom: 8px;
        }

            .format-circle ul li:after {
                content: "\f111";
                font-family: FontAwesome;
                font-style: normal;
                font-weight: normal;
                text-decoration: inherit;
                color: #777;
                font-size: 6px;
                position: absolute;
                left: 0;
                top: 8px;
            }

    .ht-image img {
        width: 80%;
    }

    .ht-image {
        width: 100%;
        float: left;
        display: table-cell;
        vertical-align: middle;
        text-align: center;
    }
</style>
<div>
    <div class="container-fluid row op-banner">
        <div class="container" style="height: 100%; justify-content: center;">

            <div style="display:flex; flex-direction:column; align-items:center; justify-content:space-between; width:100%">
                <div></div>
                <div style="width: 80%; text-align: center; color:white;">
                    <h3 style="font-size:32px; color:white">
                        Trung tâm hỗ trợ sử dụng Open24
                    </h3>
                    <div style="position:relative; width:100%; margin:15px 0">
                        <input class="_sear-hotro" type="text" placeholder="Nhập thông tin bạn muốn tìm kiếm..." value="@ViewBag.SearchString" />
                        <i style="position: absolute; top: 10px; right: 15px; font-size: 19px;" class="fa fa-search"></i>
                    </div>
                    <div>
                        Liên hệ ngay
                        <span style="color: #FFD40C"><i class="fa fa-phone"></i>     0247 303 9333</span> để được hỗ trợ trực tiếp
                    </div>
                </div>
                <div>
                    <img src="~/Content/images/huongdansudung/help.png" />
                </div>
            </div>
        </div>
    </div>

    <div class="container ">
        <div class=" ht-tree-tinh-nang" style="padding-top:15px;">
            <div class="ht-tree-left">
                <ul data-bind="foreach:listResult">
                    <li class="li-first">
                        <a href="javascript:void(0)" class="ht-a-parent tree-a" data-bind="attr: {'data-id': id},click:$parents[0].SelectTinhNang">
                            <span class="ht-title-parent" data-bind="text:text">Hàng hóa</span>
                            @*<div data-bind="visible: children.length>0">
                                <i class="fa fa-plus-square" aria-hidden="true"></i>
                                <i class="fa fa-minus-square" aria-hidden="true" style="display:none"></i>
                            </div>*@
                        </a>
                        <ul class="tree-child" data-bind="foreach:children">
                            <li>
                                <a href="javascript:void(0)" class="tree-a" data-bind="attr: {'data-id': id},click:$parents[1].SelectTinhNang">
                                    <div data-bind="visible: children.length>0">
                                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                                        <i class="fa fa-angle-down" aria-hidden="true" style="display:none"></i>
                                    </div>
                                    <span data-bind="text:text">Hàng hóa</span>
                                </a>
                                <ul class="tree-child" data-bind="foreach:children">
                                    <li>
                                        <a href="javascript:void(0)" class="tree-a" data-bind="attr: {'data-id': id},click:$parents[2].SelectTinhNang">

                                            <span data-bind="text:text">Hàng hóa</span>
                                        </a>
                                    </li>

                                </ul>
                            </li>

                        </ul>
                    </li>
                </ul>
            </div>
            <div class="ht-tree-right">
                <div class="floatleft ">
                    <h1>
                        <span data-bind="text:tentitle"></span>
                        <a href="javascript: void(0)" class="video" onclick="changeVideo()" hidden>
                            <i class="fa fa-play-circle element"></i>
                        </a>
                    </h1>
                </div>
                <div class="floatleft view-html" style="margin-top:15px;">
                    <div data-bind="html:noidung" style="position:relative"></div>

                </div>
                <div class="related-news fl">
                    <div class="fl carenews" style="padding-top: 1%;">
                        <div class="fb-like" data-bind="attr:{'data-href':url}" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="true"></div>
                    </div>
                    <div class="fb-comments" data-bind="attr:{'data-href':url}" data-numposts="5" data-width="100%"></div>
                </div>
            </div>
          
        </div>

    </div>

    <div class="container">
        <div class="op-section-title">
            <font>Phần mềm hỗ trợ</font>
        </div>
        <div class="row">
            <div class="col-md-4 col-xs-12">
                <div class="op-download-helper">
                    <img src="~/Content/images/huongdansudung/teamvier.png" />
                    <b>Teamviewer</b>
                    <span>Hỗ trợ máy tính từ xa</span>
                    <a target="_blank" href="https://www.teamviewer.com/vi/"><i class="fa fa-cloud-download"></i>Tải xuống</a>
                </div>
            </div>
            <div class="col-md-4 col-xs-12">
                <div class="op-download-helper">
                    <img src="~/Content/images/huongdansudung/ultra.png" />
                    <b>
                        Ultraviewer
                    </b>
                    <span>Hỗ trợ máy tính từ xa</span>
                    <a target="_blank" href="https://ultraviewer.net/vi/"><i class="fa fa-cloud-download"></i>Tải xuống</a>
                </div>
            </div>
            <div class="col-md-4 col-xs-12">
                <div class="op-download-helper">
                    <img src="~/Content/images/huongdansudung/driver.png" />
                    <b>Driver</b>
                    <span>Máy in</span>
                    <a target="_blank" href="https://xprinter.vn/download-driver-may-in-driver-pos-printer/"><i class="fa fa-cloud-download"></i>Tải xuống</a>
                </div>
            </div>

        </div>
    </div>
</div>
@*<script src="~/Assets/js/Client/HoTroPhanMem.js" type="text/javascript"></script>*@
<script>

            var hotrophanmem = function (Isform, id, nhomId) {
                var self = this;
                //===============================
                // Khai báo chung
                //===============================
                self.listnhomnganh = ko.observableArray();
                self.listResult = ko.observableArray();
                self.listCauHoileft = ko.observableArray();
                self.listCauHoiright = ko.observableArray();
                self.page = ko.observable(1);
                self.groupNhom = ko.observable(id);
                self.groupNhomtinhnang = ko.observable(nhomId);
                self.tentitle = ko.observable();
                self.video = ko.observable();
                self.noidung = ko.observable();
                self.ListTinhNang = ko.observableArray();
                self.url = ko.observable(window.location.href);
                function loadHoTro() {
                    $.ajax({
                        url: '/Open24Api/ApiHoTro/GetViewHoTro',
                        type: 'GET',
                        async: true,
                        dataType: 'json',
                        contentType: 'application/json',
                        success: function (result) {
                            if (result.res === true) {

                                self.listnhomnganh(result.DataSoure.NhomNganh);
                                self.listResult(result.DataSoure.TinhNang);
                            }
                            else {
                                alert(result.mess);
                            }

                        },
                        error: function (result) {
                            alert(result);
                        }
                    });

                }

                function loadCauHoi() {
                    $.ajax({
                        url: '/Open24Api/ApiHoTro/GetViewCauHoi?page=' + self.page(),
                        type: 'GET',
                        async: true,
                        dataType: 'json',
                        contentType: 'application/json',
                        success: function (result) {
                            if (result.res === true) {
                                var length = result.DataSoure.length;
                                if (length <= 0) {
                                    $('#Addnew').hide();
                                }
                                var max = length / 2;
                                var itemleft = self.listCauHoileft();
                                itemleft.push.apply(itemleft, result.DataSoure.slice(max, length));
                                var itemright = self.listCauHoiright();
                                itemright.push.apply(itemright, result.DataSoure.slice(0, max))
                                self.listCauHoileft(itemright);
                                self.listCauHoiright(itemleft);
                            }
                            else {
                                alert(result.mess);
                            }

                        },
                        error: function (result) {
                            alert(result);
                        }
                    });

                }

                function loadHoTroChiTiet() {
                    $.ajax({
                        url: '/Open24Api/ApiHoTro/GetViewTinhNang?group=' + self.groupNhomtinhnang() + '&tinhnang=' + self.groupNhom(),
                        type: 'GET',
                        dataType: 'json',
                        contentType: 'application/json',
                        success: function (result) {
                            if (result.res === true) {
                                self.listResult(result.DataSoure.json);
                                self.ListTinhNang(result.DataSoure.list);
                                if (self.groupNhomtinhnang() !== 0 && self.groupNhom() === 0) {
                                    $('.ht-tree-left ul li').each(function (i) {
                                        if (i === 0) {
                                            $(this).find('a').find('i').each(function () {
                                                $(this).toggle();
                                            });
                                            if ($(this).find('ul').find('li').length > 0) {
                                                $($(this).find('ul')[0]).show();
                                                $(this).find('ul').find('li').each(function (i) {
                                                    if (i === 0) {
                                                        $(this).find('a').find('i').each(function () {
                                                            $(this).toggle();
                                                        });
                                                        if ($(this).find('ul').find('li').length > 0) {
                                                            $($(this).find('ul')[0]).show();
                                                            $(this).find('ul').find('li').each(function (i) {
                                                                if (i === 0) {
                                                                    $(this).find('a').addClass('hotro-ac');
                                                                    loadfirst($(this).find('a').data('id')); return

                                                                }
                                                            });
                                                        }
                                                        else {
                                                            $(this).find('a').addClass('hotro-ac');
                                                            loadfirst($(this).find('a').data('id')); return
                                                        }

                                                    }
                                                });
                                            }
                                            else {
                                                $(this).find('a').addClass('hotro-ac');
                                                loadfirst($(this).find('a').data('id')); return
                                            }

                                        }
                                    });
                                }
                                else {
                                    $('.ht-tree-left ul li').each(function (i) {
                                        if ($(this).find('a').data('id') === result.DataSoure.ong) {
                                            $(this).find('a').find('i').each(function () {
                                                $(this).toggle();
                                            });
                                            if ($(this).find('ul').find('li').length > 0) {
                                                $($(this).find('ul')[0]).show();
                                                $(this).find('ul').find('li').each(function (i) {
                                                    if ($(this).find('a').data('id') === result.DataSoure.cha) {
                                                        $(this).find('a').find('i').each(function () {
                                                            $(this).toggle();
                                                        });
                                                        if ($(this).find('ul').find('li').length > 0) {
                                                            $($(this).find('ul')[0]).show();
                                                            $(this).find('ul').find('li').each(function (i) {
                                                                if ($(this).find('a').data('id') === result.DataSoure.con || (i === 0 && result.DataSoure.con === 0)) {
                                                                    $(this).find('a').addClass('hotro-ac');
                                                                    loadfirst($(this).find('a').data('id'));
                                                                    return
                                                                }

                                                            });
                                                        }
                                                        else {
                                                            $(this).find('a').addClass('hotro-ac');
                                                            loadfirst($(this).find('a').data('id'));
                                                            return
                                                        }

                                                    }
                                                    else {
                                                        if (i === 0 && result.DataSoure.cha === 0) {
                                                            $(this).find('a').find('i').each(function () {
                                                                $(this).toggle();
                                                            });
                                                            if ($(this).find('ul').find('li').length > 0) {
                                                                $($(this).find('ul')[0]).show();
                                                                $(this).find('ul').find('li').each(function (i) {
                                                                    if (i === 0) {
                                                                        $(this).find('a').addClass('hotro-ac');
                                                                        loadfirst($(this).find('a').data('id'));
                                                                        return
                                                                    }
                                                                });
                                                            }
                                                            else {
                                                                $(this).find('a').addClass('hotro-ac');
                                                                loadfirst($(this).find('a').data('id'));
                                                                return
                                                            }
                                                        }
                                                    }
                                                });
                                            }
                                            else {
                                                $(this).find('a').addClass('hotro-ac');
                                                loadfirst($(this).find('a').data('id'));
                                                return
                                            }

                                        }
                                    });
                                }
                            }
                            else {
                                alert(result.mess);
                            }

                        },
                        error: function (result) {
                            alert(result);
                        }
                    });

                }
                function loadfirst(id) {
                    var data = self.ListTinhNang().filter(o => o.ID == id);
                    if (data.length > 0) {
                        self.tentitle(data[0].Ten);
                        self.video(data[0].Video);
                        self.noidung(data[0].NoiDung);
                        $('.video').show()
                    }
                }
                self.SelectTinhNang = function (model) {
                    if (model.IsCha === true) {
                        window.location.href = '/huong-dan-su-dung/' + self.groupNhomtinhnang() + '/' + model.id + '/danh-muc-tinh-nang-' + model.Title;
                    }
                    if (model.children.length <= 0) {
                        self.tentitle(model.text);
                        self.video(model.video);
                        self.noidung(model.noidung);
                        $('.video').show()
                    }
                }
                self.nextpage = function () {
                    self.page(self.page() + 1);
                    loadCauHoi();
                }
                if (Isform === 1) {
                    loadCauHoi();
                    loadHoTro();
                }
                else {
                    loadHoTroChiTiet();
                }
                console.log(1)
                return self;
            };


            var keyid =@ViewBag.keyId;
            var viewmodel = new hotrophanmem(2,@ViewBag.ID_Group, keyid);

    ko.applyBindings(viewmodel);

        $("._sear-hotro").on('keyup', function (e) {
            if (e.keyCode == 13) {
                window.location.href = "/ho-tro-tim-kiem?search=" + $(this).val();
            }
        });
        $('body').on('hidden.bs.modal', '.modal', function () {
            $('#myVideo').attr("src", '');
        });
        function changeVideo() {
            $('#myVideo').each(function () {
                var frame = document.getElementById("myVideo");
                frame.contentWindow.postMessage(
                    '{"event":"command","func":"playVideo","args":""}',
                    '*');
            });
            $('#myVideo').attr("src", viewmodel.video());
            if (viewmodel.video() !== '' && viewmodel.video() !== null && viewmodel.video()!== undefined) { $("#myModal").modal("show"); }

        }
        $('.ht-tree-left ').on('click', 'ul li a', function () {
            if ($(this).next('ul').find('li').length > 0)
            {
                $(this).find('i').each(function () {
                    $(this).toggle();
                })
                $(this).next('ul').toggle();
                if ($(this).next('ul').find('li').length <= 0) {
                    $('.tree-a').removeClass('hotro-ac');
                    $(this).addClass('hotro-ac');
                }
            }
            else {
                $(document).scrollTop(0);
                $('.tree-a').removeClass('hotro-ac');
                $(this).addClass('hotro-ac');
                if (check) {
                    check = !check;
                    $('.ht-tree-left').toggle();
                    $('.ht-filter-tree').find('i').each(function () {
                        $(this).toggle();
                    })
                }
            }

        });
        var check = false;
        $('.ht-link').on('click','.ht-filter-tree', function () {
            $('.ht-tree-left').toggle();
            check = !check;
            $(this).find('i').each(function () {
                $(this).toggle();
            })
        })
</script>